<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lol</title>
    
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #2b2d42, #1f2a44);
            color: #e0e0e0;
        }
        .container {
            background: #1e1e2f;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
            width: 100%;
            max-width: 450px;
            text-align: center;
        }
        h1 {
            color: #e0e0e0;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
        }
        p {
            font-size: 1.2rem;
            color: #b0b0b0;
            margin: 0.5rem 0;
        }
        .info {
            font-size: 1rem;
            color: #4ea8de;
            word-break: break-all;
            text-align: left;
            margin: 0.5rem 0;
        }
        button {
            margin-top: 1rem;
            width: 100%;
            padding: 0.75rem;
            background: #5e60ce;
            color: #e0e0e0;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s;
        }
        button:hover {
            background: #4ea8de;
        }
        #status {
            font-size: 1rem;
            color: #b0b0b0;
            margin-top: 1rem;
        }
        .footer {
            font-size: 0.9rem;
            color: #b0b0b0;
            margin-top: 1rem;
        }
        .footer a {
            color: #4ea8de;
            text-decoration: none;
        }
        .footer a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Secret Settings - IP Details</h1>
        <p>IP Address:</p>
        <p class="info" id="ip-address">Fetching...</p>
        <p>City:</p>
        <p class="info" id="city">Fetching...</p>
        <p>Region:</p>
        <p class="info" id="region">Fetching...</p>
        <p>Country:</p>
        <p class="info" id="country">Fetching...</p>
        <p>ISP/Organization:</p>
        <p class="info" id="org">Fetching...</p>
        <p>Latitude:</p>
        <p class="info" id="latitude">Fetching...</p>
        <p>Longitude:</p>
        <p class="info" id="longitude">Fetching...</p>
        <p>Postal Code:</p>
        <p class="info" id="postal">Fetching...</p>
        <p>Timezone:</p>
        <p class="info" id="timezone">Fetching...</p>
        <p>ASN:</p>
        <p class="info" id="asn">Fetching...</p>
        <p>Hostname:</p>
        <p class="info" id="hostname">Fetching...</p>
        <p>User Agent:</p>
        <p class="info" id="user-agent">Fetching...</p>
        <p>Browser Language:</p>
        <p class="info" id="language">Fetching...</p>
        <p>Screen Resolution:</p>
        <p class="info" id="screen">Fetching...</p>
        <p>Device Memory:</p>
        <p class="info" id="device-memory">Fetching...</p>
        <p>Connection Type:</p>
        <p class="info" id="connection">Fetching...</p>
        <p id="status"></p>
        <button onclick="fetchIPAndDetails()">Refresh</button>
        <button onclick="downloadData()">Download Data</button>
        <p class="footer">Your IP and device details are saved locally for analytics. Powered by <a href="https://ipinfo.io">ipinfo.io</a>.</p>
    </div>
    <script>
        async function fetchIPAndDetails() {
            const fields = [
                'ip-address', 'city', 'region', 'country', 'org', 
                'latitude', 'longitude', 'postal', 'timezone', 'asn', 
                'hostname', 'user-agent', 'language', 'screen', 
                'device-memory', 'connection'
            ];
            const statusDisplay = document.getElementById('status');
            fields.forEach(id => document.getElementById(id).textContent = 'Fetching...');
            statusDisplay.textContent = '';

            try {
                // Fetch IP address
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();
                const ip = ipData.ip;
                document.getElementById('ip-address').textContent = ip;

                // Fetch detailed IP information
                const detailsResponse = await fetch(`https://ipinfo.io/${ip}/json?token=58acd72e7fd71d`);
                const detailsData = await detailsResponse.json();

                // Display IP details
                document.getElementById('city').textContent = detailsData.city || 'Unknown';
                document.getElementById('region').textContent = detailsData.region || 'Unknown';
                document.getElementById('country').textContent = detailsData.country || 'Unknown';
                document.getElementById('org').textContent = detailsData.org || 'Unknown';
                document.getElementById('latitude').textContent = detailsData.loc ? detailsData.loc.split(',')[0] : 'Unknown';
                document.getElementById('longitude').textContent = detailsData.loc ? detailsData.loc.split(',')[1] : 'Unknown';
                document.getElementById('postal').textContent = detailsData.postal || 'Unknown';
                document.getElementById('timezone').textContent = detailsData.timezone || 'Unknown';
                document.getElementById('asn').textContent = detailsData.asn ? detailsData.asn.asn : 'Unknown';
                document.getElementById('hostname').textContent = detailsData.hostname || 'Unknown';

                // Display browser/device details
                document.getElementById('user-agent').textContent = navigator.userAgent || 'Unknown';
                document.getElementById('language').textContent = navigator.language || 'Unknown';
                document.getElementById('screen').textContent = `${window.screen.width}x${window.screen.height}` || 'Unknown';
                document.getElementById('device-memory').textContent = navigator.deviceMemory ? `${navigator.deviceMemory} GB` : 'Unknown';
                document.getElementById('connection').textContent = navigator.connection ? navigator.connection.effectiveType : 'Unknown';

                // Prepare data for storage
                const data = {
                    ip,
                    city: detailsData.city || 'Unknown',
                    region: detailsData.region || 'Unknown',
                    country: detailsData.country || 'Unknown',
                    org: detailsData.org || 'Unknown',
                    latitude: detailsData.loc ? detailsData.loc.split(',')[0] : 'Unknown',
                    longitude: detailsData.loc ? detailsData.loc.split(',')[1] : 'Unknown',
                    postal: detailsData.postal || 'Unknown',
                    timezone: detailsData.timezone || 'Unknown',
                    asn: detailsData.asn ? detailsData.asn.asn : 'Unknown',
                    hostname: detailsData.hostname || 'Unknown',
                    userAgent: navigator.userAgent || 'Unknown',
                    language: navigator.language || 'Unknown',
                    screen: `${window.screen.width}x${window.screen.height}` || 'Unknown',
                    deviceMemory: navigator.deviceMemory ? `${navigator.deviceMemory} GB` : 'Unknown',
                    connection: navigator.connection ? navigator.connection.effectiveType : 'Unknown',
                    timestamp: new Date().toISOString()
                };

                // Save to localStorage
                const visitorId = `visitor_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
                localStorage.setItem(visitorId, JSON.stringify(data));
                statusDisplay.textContent = 'Data saved locally! Click "Download Data" to save as a file.';

                // Store data for download
                window.visitorData = data;
            } catch (error) {
                fields.forEach(id => document.getElementById(id).textContent = 'Error fetching data');
                statusDisplay.textContent = 'Error: ' + error.message;
                console.error('Error:', error);
            }
        }
        alert('lol fyi im not smart enough to do anything with ts so yeah :(')
        function downloadData() {
            if (!window.visitorData) {
                alert('No data available to download');
                return;
            }
            const data = window.visitorData;
            const text = [
                `IP Address: ${data.ip}`,
                `City: ${data.city}`,
                `Region: ${data.region}`,
                `Country: ${data.country}`,
                `ISP/Organization: ${data.org}`,
                `Latitude: ${data.latitude}`,
                `Longitude: ${data.longitude}`,
                `Postal Code: ${data.postal}`,
                `Timezone: ${data.timezone}`,
                `ASN: ${data.asn}`,
                `Hostname: ${data.hostname}`,
                `User Agent: ${data.userAgent}`,
                `Browser Language: ${data.language}`,
                `Screen Resolution: ${data.screen}`,
                `Device Memory: ${data.deviceMemory}`,
                `Connection Type: ${data.connection}`,
                `Timestamp: ${data.timestamp}`
            ].join('\n');
            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `visitor_${Date.now()}.txt`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // Fetch IP and details on page load
        fetchIPAndDetails();
    </script>
</body>
</html>
